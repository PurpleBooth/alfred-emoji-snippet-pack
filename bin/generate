#!/usr/bin/env ruby
require 'securerandom'
require 'json'
require 'gemoji'

Emoji.all.each do |emoji|
  emoji.aliases.each do |emoji_name|
    snippet_name = "#{emoji.raw} \"#{emoji_name}\" #{emoji.description}"

    snippet = {
        alfredsnippet: {
            snippet: emoji.raw,
            uid: SecureRandom.uuid,
            name: snippet_name,
            keyword: ":#{emoji_name}:"
        }
    }

    File.write(File.join("build", "json", "#{emoji.name}-#{SecureRandom.uuid}.json"), JSON.generate(snippet))
  end
end