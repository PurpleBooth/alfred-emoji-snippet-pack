#!/usr/bin/env ruby
require 'securerandom'
require 'json'
require 'gemoji'

Emoji.all.each do |emoji|
  snippet_name = "#{emoji.raw} "
  snippet_name += "#{emoji.description} "
  snippet_name += emoji.aliases.map { |string| "\"#{string}\"" }.join(", ")
  snippet_name += " (#{emoji.tags.join(", ")})" if emoji.tags.size > 0

  snippet = {
      alfredsnippet: {
          snippet: emoji.raw,
          uid: SecureRandom.uuid,
          name: snippet_name,
          keyword: ":#{emoji.name}:"
      }
  }

  File.write(File.join("build", "json", "#{emoji.name}-#{SecureRandom.uuid}.json"), JSON.generate(snippet))
end